# TEACHING-MANUAL.md - 知识结构与教学方法手册

## 用途
创建教案时加载此手册，指导如何组织和讲解不同类型的知识。

---

## 一、知识结构分类

根据知识的性质和教学目标，分为9种类型。每种类型有特定的结构要求。

### 类型1：性能指标类（Performance Metric）

**适用场景**：讲解可量化的系统指标（如吞吐量、延迟、可用性）

**结构要求**：
1. **定义**：是什么（单位、计算方式）
2. **重要性**：为什么重要（对系统的影响）
3. **影响因素**：哪些因素影响它
   - 每个因素需说明：因素 → 影响机制 → 影响方向 → 优化手段
4. **数据参考**：具体数字（来源需可靠）
5. **权衡分析**：
   - 主要权衡：核心的取舍关系
   - 次要权衡：其他需考虑的取舍
   - 缓解方式：如何降低权衡的代价（说明从哪个维度缓解）
6. **记忆串联**：类比助记

**闭环检查**：
- 影响因素是否说明了"如何影响"而不只是"是什么"？
- 优化手段是否可操作？

---

### 类型2：机制/协议类（Mechanism/Protocol）

**适用场景**：讲解具体的技术机制或协议（如Gossip协议、一致性哈希）

**结构要求**：
1. **定义**：是什么 + 核心特点
2. **重要性**：解决什么问题
   - 对比传统方案：传统方案的问题 → 新方案如何解决
3. **核心机制**（需形成闭环）：
   - 输入：什么触发这个机制？
   - 处理过程：具体步骤是什么？
   - 输出/结果：产生什么效果？
   - 异常处理：边界情况如何处理？
4. **关键参数**：
   - 每个参数：作用 → 权衡（值大/值小的影响）→ 典型值
5. **代价与缓解**：
   - 主要代价 + 缓解方式（说明从哪个维度缓解）
   - 次要代价 + 缓解方式
6. **适用边界**：
   - 适合场景：什么条件下使用
   - 不适合场景：什么条件下避免使用
7. **记忆串联**：类比助记

**闭环检查**：
- 机制是否有完整的输入→处理→输出→异常？
- 参数权衡是否说明了两端的影响？

---

### 类型3：对比分析类（Comparison）

**适用场景**：对比两个或多个方案/概念的异同

**结构要求**：
1. **对比目的**：为什么要对比（帮助做什么决策）
2. **方案描述**（每个方案使用统一框架）：
   - 核心机制：如何工作
   - 效果：解决什么问题
   - 代价：牺牲什么
   - 适用场景：什么时候用
3. **对比维度**：
   - 列出具体的对比维度（如：延迟、吞吐量、复杂度、成本、容错性）
   - 每个维度上各方案的表现
4. **选择标准**：
   - 条件A → 选择方案X，因为...
   - 条件B → 选择方案Y，因为...
5. **混合策略**（如果适用）：
   - 如何组合使用多个方案
   - 组合的适用场景

**闭环检查**：
- 每个方案是否用统一框架描述？
- 选择标准是否明确、可操作？

---

### 类型4：应用边界类（Application Boundary）

**适用场景**：讲解某技术/方案的适用范围和限制

**结构要求**：
1. **核心能力总结**：这个技术能做什么
2. **硬边界**（技术限制，不可突破）：
   - 限制是什么
   - 为什么无法突破（根本原因）
3. **软边界**（权衡选择，可调整）：
   - 限制是什么
   - 如何通过权衡调整边界
4. **决策标准**：
   - 条件 → 是否使用 → 理由
5. **常见误用**：
   - 误用场景：什么情况下容易误用
   - 后果：误用会导致什么问题
   - 正确做法：应该怎么做
6. **个人洞察**（如果有）

**闭环检查**：
- 硬边界和软边界是否区分清楚？
- 常见误用是否有具体场景？

---

### 类型5：技术方案类（Technical Solutions）

**适用场景**：讲解多个技术方案如何解决同一问题

**结构要求**：
1. **总**：问题描述
2. **分类维度**：方案的切入口/设计思路
   - 说明不同方案从什么角度解决问题
3. **每个方案**：
   - 方案名称
   - **机制协同关系**：说明多个机制如何配合工作（形式不限，如：前提→核心→保障）
   - **每个机制的完整链条**：
     - 机制：具体做法（需形成闭环：输入→处理→输出）
     - 效果：解决什么问题（多个效果需区分主要/次要）
     - 代价：牺牲什么（多个代价需区分主要/次要）
     - 缓解方式：如何降低代价（需说明从哪个维度缓解：架构层面/参数调优/替代方案/降级策略）
     - 适用场景：什么时候用
4. **方案对比**：
   - 对比维度（如：延迟、吞吐量、复杂度、成本）
   - 各方案在每个维度的表现
5. **方案组合**（如果适用）：
   - 哪些方案可以组合使用
   - 组合的效果和适用场景

**闭环检查**：
- 每个机制是否有完整的效果→代价→缓解链条？
- 缓解方式是否说明了从哪个维度缓解？
- 方案对比是否覆盖关键维度？

---

### 类型6：概念定义类（Concept Definition）

**适用场景**：引入新概念/术语时

**结构要求**：
1. **定义**：一句话定义
2. **核心特征**：区分于其他概念的关键特征
3. **与相关概念的关系**：
   - 对比关系：与X的区别是...
   - 包含关系：属于X的一种...
   - 依赖关系：依赖于X...
4. **具体示例**：用例子说明概念
5. **常见误解**：
   - 误解是什么
   - 正确理解是什么

**闭环检查**：
- 定义是否足够精确？
- 与相关概念的边界是否清晰？

---

### 类型7：问题诊断类（Problem Diagnosis）

**适用场景**：分析问题的根因和解决思路

**结构要求**：
1. **问题现象**：观察到什么症状
2. **可能原因**（按可能性排序）：
   - 原因1（最可能）：描述 + 为什么可能
   - 原因2：描述 + 为什么可能
   - ...
3. **诊断方法**：
   - 如何确认是哪个原因
   - 每个原因对应的诊断步骤
4. **解决方案**：
   - 每个原因对应的解决方案
   - 解决方案的代价和注意事项

**闭环检查**：
- 原因是否按可能性排序？
- 每个原因是否有对应的诊断方法和解决方案？

---

### 类型8：演进/历史类（Evolution/History）

**适用场景**：讲解技术的演进过程

**结构要求**：
1. **初始方案**：最早的解决方案是什么
2. **演进过程**（递进关系）：
   - 阶段1：方案 → 发现的问题
   - 阶段2：改进方案 → 解决了什么 → 新发现的问题
   - 阶段3：进一步改进 → ...
3. **当前最佳实践**：目前推荐的方案
4. **未来方向**（如果适用）：可能的发展趋势

**闭环检查**：
- 每个阶段是否说明了"发现的问题"？
- 演进是否形成清晰的递进链条？

---

### 类型9：架构决策类（Architecture Decision）

**适用场景**：讲解架构设计中的关键决策点

**结构要求**：
1. **决策点**：需要做什么选择
2. **决策背景**：为什么需要做这个决策
3. **可选方案**：有哪些选择
4. **评估维度**：用什么标准评估
5. **决策矩阵**：
   - 每个方案在每个维度的评分/表现
6. **推荐选择**：
   - 条件A下 → 推荐方案X，因为...
   - 条件B下 → 推荐方案Y，因为...
7. **决策后果**：选择后需要承担什么

**闭环检查**：
- 评估维度是否全面？
- 推荐选择是否有明确的条件？

---

## 二、教学方法规定

### 2.1 内容组织原则

**禁止并列（Rule #22）**：
- 在所有层级递归消除并列
- 必须识别逻辑关系：递进/因果/分类/层次/时序/对比
- 如果确实并列：使用分类维度明确说明

**闭环思维**：
- 机制需要完整闭环：输入→处理→输出→异常
- 权衡需要完整链条：代价→缓解方式→适用场景
- 状态转换需要完整循环：状态A→触发条件→状态B→后续处理

**具体示例（Rule #8）**：
- 关键概念需要：名称 + 具体数字示例
- 抽象概念需要：类比 + 实际场景

### 2.2 教学前检查

**内容检查**：
1. 知识类型是否识别正确？
2. 结构是否符合该类型的要求？
3. 是否有未定义就使用的概念？
4. 机制是否形成闭环？
5. 权衡是否有缓解方式？

**来源检查**：
1. 知识是否来自可靠来源？
2. 公式/数据是否有出处？
3. 如果不确定：停止教学，先搜索验证

### 2.3 验证问题设计

**L1（事实）**：定义？因素？
**L2（因果）**：为什么？根本原因？
**L3（权衡）**：牺牲什么？获得什么？什么时候值得？

**设计原则**：
- 问题必须基于已教授的知识
- 问题必须测试核心理解，而非细节
- L2/L3问题需要预埋线索

### 2.4 答案处理

**处理流程**：
1. 补充跳跃：学生跳过的逻辑步骤
2. 纠正错误：学生的错误理解
3. 添加遗漏：学生没提到的关键点
4. 重组表达：用学生的语言重新组织

**记录原则**：
- 使用学生的声音（处理后的版本）
- 立即记录（不要等到最后）
- 使用fsAppend追加

---

## 三、教学经验与反思

### 3.1 常见问题

**问题1：并列列举**
- 表现：直接列出"1. 2. 3."而不说明关系
- 原因：习惯性分类列举，绕过逻辑思考
- 解决：写之前强制问"关系是什么？"

**问题2：机制不闭环**
- 表现：只讲"做什么"，不讲"怎么做"
- 原因：专家盲点，假设学生知道
- 解决：检查输入→处理→输出→异常是否完整

**问题3：权衡无缓解**
- 表现：只讲代价，不讲如何缓解
- 原因：停留在问题层面，没有给出解决方案
- 解决：每个代价必须配缓解方式

**问题4：概念未定义**
- 表现：使用术语但没有先定义
- 原因：专家盲点，假设学生知道
- 解决：首次使用前必须定义

**问题5：来源不可靠**
- 表现：基于推测教授公式或机制
- 原因：过度自信，没有验证
- 解决：不确定时停止，先搜索验证

### 3.2 从Rule Evolution History提取的教训

**关于内容组织**：
- 并列是最常见的违规（4次违规记录）
- 需要强制内部检查：写之前问"关系是什么？"
- 写完后自检：是否有裸露的"1. 2. 3."？

**关于机制完整性**：
- "做什么"必须配"怎么做"
- 状态转换必须完整：A→B→后果
- 缺少机制细节会导致学生无法回答"为什么"

**关于验证问题**：
- 问之前检查：知识是否已教授？
- 问之前检查：问题是否重要？
- 不要问未教授的知识或细枝末节

**关于来源验证**：
- 公式必须有出处
- 机制必须有权威来源
- 不确定时明确告知学生"这是基于一般理解，未经验证"

---

## 四、教案编写指南

### 4.1 教案结构

```json
{
  "hook_question": "钩子问题原文",
  "knowledge_type": "知识类型（9种之一）",
  "support_knowledge": [
    {
      "name": "支撑知识名称",
      "type": "知识类型",
      "structure": {
        // 根据知识类型填写对应结构
      },
      "verification": {
        "L1": ["问题1", "问题2"],
        "L2": ["问题3"],
        "L3": ["问题4", "问题5"],
        "pre_embedded_clues": ["线索1", "线索2"]
      },
      "bridging": "如何连接到钩子问题"
    }
  ],
  "transitions": [
    {
      "from": "支撑知识1",
      "to": "支撑知识2",
      "relationship": "逻辑关系",
      "transition_sentence": "过渡句"
    }
  ],
  "risk_points": [
    {
      "risk": "可能违反的规则",
      "prevention": "预防措施"
    }
  ]
}
```

### 4.2 编写流程

1. **识别知识类型**：钩子问题涉及哪种类型的知识？
2. **确定支撑知识**：需要哪些支撑知识来回答钩子问题？
3. **设计结构**：每个支撑知识按对应类型的结构组织
4. **设计验证**：为每个支撑知识设计L1-L3问题
5. **设计过渡**：支撑知识之间的逻辑关系和过渡句
6. **识别风险**：哪些地方容易违反规则？如何预防？

### 4.3 存储位置

教案存储在 `progress/teaching-plans/` 目录下，文件名格式：`<文档名>_<钩子问题编号>.json`

例如：`发布-订阅架构风格_钩子问题12.json`

---

## 五、更新记录

**[2026-01-06]** 初始版本
- 定义9种知识结构类型
- 整理教学方法规定
- 提取教学经验与反思
- 制定教案编写指南
